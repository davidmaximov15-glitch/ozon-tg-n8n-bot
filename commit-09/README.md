# Commit 09 ‚Äî feat(menu): –∫–Ω–æ–ø–∫–∞ ¬´üßπ –û—á–∏—Å—Ç–∏—Ç—å —Ñ–∞–π–ª¬ª –≤ ¬´–ó–∞–∫–∞–∑—ã¬ª

## –ß—Ç–æ –¥–µ–ª–∞–µ—Ç

- –†–µ–Ω–¥–µ—Ä–∏—Ç ¬´–ó–∞–∫–∞–∑—ã¬ª-–ø–∞–Ω–µ–ª—å —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—ã–π UI (send-or-edit).
- –î–æ–±–∞–≤–ª—è–µ—Ç –∫–Ω–æ–ø–∫—É ¬´üßπ –û—á–∏—Å—Ç–∏—Ç—å —Ñ–∞–π–ª¬ª (`callback_data = "file:clear"`) –∏ ¬´üì• –ó–∞–≥—Ä—É–∑–∏—Ç—å CSV¬ª.
- –î–µ–ª–∞–µ—Ç ¬´üìÖ –û—Ç–∫—Ä—ã—Ç—å –∫–∞–ª–µ–Ω–¥–∞—Ä—å¬ª –∞–∫—Ç–∏–≤–Ω–æ–π —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Å–µ—Å—Å–∏–∏ —Ñ–∞–π–ª–∞:
  - –µ—Å–ª–∏ —Å–µ—Å—Å–∏–∏ –Ω–µ—Ç ‚Äî `callback_data = "noop"` –∏ —Ç–µ–∫—Å—Ç —Å –ø–æ–¥—Å–∫–∞–∑–∫–æ–π.

## –§–∞–π–ª—ã

```
workflows/
‚îî‚îÄ‚îÄ orders_menu_render.n8n.json
```

## –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

1) –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π `orders_menu_render.n8n.json` –≤ n8n.

2) –í —Ä–æ—É—Ç–µ—Ä–µ:
   - `menu:orders` ‚Üí –∑–∞–ø—É—Å–∫ `orders_menu_render`.
   - `file:clear` —É–∂–µ –¥–æ–ª–∂–µ–Ω –≤–µ—Å—Ç–∏ –≤ —Å–∞–± `files_session_and_clear` (–∫–æ–º–º–∏—Ç 02). –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî –¥–æ–±–∞–≤—å –≤–µ—Ç–∫—É:
     ```
     callback_data starts with "file:clear" ‚Üí workflowExecute: files_session_and_clear
     ```

3) –£–±–µ–¥–∏—Å—å, —á—Ç–æ –∫–æ–º–º–∏—Ç 08 —É–∂–µ –ø—Ä–∏–º–µ–Ω—ë–Ω (–Ω–æ–≤—ã–µ –∏–º–µ–Ω–∞ –∫–ª—é—á–µ–π). –≠—Ç–æ—Ç —Å–∞–± —á–∏—Ç–∞–µ—Ç `ozon:sess:<uid>:csv`.

## –ü—Ä–æ–≤–µ—Ä–∫–∏

### –ü—Ä–∏ –≤—Ö–æ–¥–µ –≤ ¬´–ó–∞–∫–∞–∑—ã¬ª:
- **–ë–µ–∑ —Å–µ—Å—Å–∏–∏**: –≤–∏–¥–µ–Ω —Ç–µ–∫—Å—Ç ¬´–ù–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞‚Ä¶¬ª, –∫–Ω–æ–ø–∫–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—è –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞ (`noop`).
- **–° —Å–µ—Å—Å–∏–µ–π**: –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –¥–∏–∞–ø–∞–∑–æ–Ω `<from>` ‚Äî `<to>`, –∫–∞–ª–µ–Ω–¥–∞—Ä—å –∞–∫—Ç–∏–≤–µ–Ω.

### –ù–∞–∂–∞—Ç–∏–µ ¬´üßπ –û—á–∏—Å—Ç–∏—Ç—å —Ñ–∞–π–ª¬ª:
- –ß–∏—Å—Ç–∏—Ç `ozon:sess:<uid>:csv`, `ozon:sess:<uid>:dates`, `ozon:ui:<uid>:calendar:message_id`.
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ—Å—Ç ¬´–ö—ç—à –æ—á–∏—â–µ–Ω. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–æ–≤—ã–π –æ—Ç—á—ë—Ç¬ª (–ª–æ–≥–∏–∫–∞ –∏–∑ –∫–æ–º–º–∏—Ç–∞ 02).

### ¬´üì• –ó–∞–≥—Ä—É–∑–∏—Ç—å CSV¬ª:
- –í–µ–¥—ë—Ç –≤ –≤–µ—Ç–∫—É –∑–∞–≥—Ä—É–∑–∫–∏ (`menu:upload`).

### –°–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç–µ:
- –û—Å—Ç–∞—ë—Ç—Å—è –æ–¥–Ω–∏–º ‚Äî –ø–µ—Ä–µ–æ—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `ui_orchestrator`.

## –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–ª—é—á–∏ Redis

- `ozon:sess:<uid>:csv` ‚Äî —Å–µ—Å—Å–∏—è —Ñ–∞–π–ª–∞ —Å –ø–æ–ª—è–º–∏ `from`, `to`, `availableDates`
- `ozon:ui:<uid>:calendar:message_id` ‚Äî ID —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- **–ö–æ–º–º–∏—Ç 01**: `ui_orchestrator.n8n.json` –¥–ª—è send-or-edit
- **–ö–æ–º–º–∏—Ç 02**: `files_session_and_clear.n8n.json` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ `file:clear`
- **–ö–æ–º–º–∏—Ç 08**: —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è –∫–ª—é—á–µ–π Redis (`ozon:sess:*`)
